<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Temple Road Trip Planner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- CSS -->
  <link rel="stylesheet" href="css/temple-trip.css">

  <!-- JS -->
  <script src="js/temple-trip.js" defer></script>
</head>
<body class="bg-flag">
  <!-- Top navigation -->
  <header class="main-header">
    <div class="brand">
      <span class="brand-icon">ðŸ§­</span>
      <span class="brand-text">Temple Road Trip</span>
    </div>
  </header>

  <nav class="top-nav">
    <a href="index.html" class="nav-link">Home</a>
    <a href="temple-trip.html" class="nav-link active">Trip planner &amp; map</a>
    <a href="trip-ideas.html" class="nav-link">Ideas & Nearby Sights</a>
    <a href="nps-by-state.html" class="nav-link">NPS by State</a>
    <a href="all-national-parks.html" class="nav-link">All National Parks</a>
    <a href="national-parks.html" class="nav-link">National Parks</a>
    <a href="pass-by-state.html" class="nav-link">Pass by State</a>
  </nav>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Temple Road Trip â€“ National Parks by State</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Reuse your patriotic styles -->
  <link rel="stylesheet" href="css/temple-trip.css">
  <script src="js/nps-by-state.js" defer></script>
</head>
<body class="bg-flag">
  <!-- Top brand bar -->
  <header class="main-header">
    <div class="brand">
      <span class="brand-icon">ðŸ§­</span>
      <span class="brand-text">Temple Road Trip</span>
    </div>
  </header>



  <main class="wrap">
    <!-- Collapsible â€œhow to useâ€ box -->
    <section class="trip-info" open>
      <summary class="trip-info-summary">
        How to use this NPS by State page
        <span class="chevron">â–¼</span>
      </summary>
      <div class="trip-info-body">
        <p class="subtitle">
          Pick a <strong>state</strong> to see National Parks and other big
          National Park Service sites where your <strong>America the Beautiful</strong>
          pass is useful. Click a park to center the map on it, or open it in Google Maps.
        </p>
        <p class="small-note">
          Fees and hours change a lot. These are **rough ideas** â€“ always double-check
          the official NPS website before you go.
        </p>
      </div>
    </section>

    <section class="layout">
      <!-- LEFT: state selector + map -->
      <section class="panel">
        <div class="panel-title">
          <span>Pick a state</span>
        </div>

        <div class="field">
          <label for="stateSelect"><strong>State</strong></label>
          <select id="stateSelect">
            <!-- populated by JS from the data -->
          </select>
        </div>

        <p class="small">
          When you change the state:
          <br>â€¢ The map zooms to that state
          <br>â€¢ The list on the right filters to only that stateâ€™s parks
        </p>

        <div class="panel-title" style="margin-top:0.75rem;">
          <span>Map view</span>
          <span class="small" id="mapStateHint">Whole U.S. overview</span>
        </div>

        <div class="map-wrapper">
          <iframe id="npsMapFrame"
                  src="https://www.google.com/maps?q=United+States+national+parks&z=3&output=embed"
                  loading="lazy"
                  referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
        <div class="map-link-row">
          <a id="npsMapExternalLink"
             class="btn small ghost"
             href="https://www.google.com/maps?q=United+States+national+parks"
             target="_blank" rel="noopener">
            Open this view in Google Maps
          </a>
        </div>

        <p class="small-note">
          If youâ€™re offline, this map square may stay blank, but the list of parks
          on the right will still show up because itâ€™s all in this file.
        </p>
      </section>

      <!-- RIGHT: parks list -->
      <section class="panel">
        <div class="panel-title">
          <span>Parks & NPS sites in <span id="currentStateLabel">all states</span></span>
        </div>

        <div class="field">
          <label for="parkSearch">Filter by name / city (optional)</label>
          <input id="parkSearch" type="text" placeholder="Type 'Zion', 'Canyon', 'Houston', etc.">
        </div>

        <div class="list-header" style="margin-top:0.4rem;">
          <span class="small" id="parkCountLabel">0 sites</span>
          <span class="badge small">Pass = America the Beautiful</span>
        </div>

        <div class="stop-list" id="parkList">
          <!-- JS fills in cards -->
        </div>

        <p class="small-note">
          To add more parks later, just copy one of the cards in
          <code>js/nps-by-state.js</code> and change the details.
        </p>
      </section>
    </section>
  </main>
</body>
</html>
    <!-- You can duplicate this line to add more tabs -->
    <!-- <a href="my-photos.html">Trip Photos</a> -->
  </nav>

  <main class="wrap">

    <!-- Collapsible overview box -->
    <details class="trip-info" open>
      <summary class="trip-info-summary">
        Temple Road Trip Planner â€“ overview
        <span class="chevron">â–¼</span>
      </summary>

      <div class="trip-info-body">
        <h1>Temple Road Trip Planner</h1>
        <p class="subtitle">
          December 2025 temples &amp; sights â€” fully editable, patriotic theme, and a map that changes when you click a stop.
        </p>

        <!-- Info / budget row -->
        <section class="info-row">
          <div class="info-box" id="statsBox">
            Trip stats loadingâ€¦
          </div>
          <div class="info-box">
            <strong>Sleep &amp; offline:</strong>
            The schedule and notes work fine with no Wi-Fi or data (everything is saved in this browser).
            The map square uses a simple Google Maps embed, so if you're offline, that square might stay blank.
          </div>
        </section>
      </div>
    </details>

    <!-- Main layout: left (form + list), right (map + notes) -->
    <section class="layout">
      <!-- LEFT: form + list -->
      <section class="panel">
        <div class="panel-title">
          <span>Add / Edit Stop</span>
          <button type="button" class="btn btn-ghost" id="clearAllBtn">Clear all</button>
        </div>

        <form id="stopForm">
          <input type="hidden" id="editStopId">

          <div class="form-grid">
            <div>
              <label for="nameInput">Name</label>
              <input id="nameInput" type="text" placeholder="Las Vegas Nevada Temple" required>
            </div>
            <div>
              <label for="typeInput">Type</label>
              <select id="typeInput">
                <option value="temple">Temple</option>
                <option value="nps">National Park / NPS</option>
                <option value="museum">Museum / historic</option>
                <option value="drive">Drive / travel day</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div>
              <label for="locationInput">City / address</label>
              <input id="locationInput" type="text" placeholder="Las Vegas, NV" required>
            </div>
            <div>
              <label for="arrivalInput">Arrival / session time</label>
              <input id="arrivalInput" type="datetime-local">
            </div>

            <div>
              <label for="departInput">Planned depart time</label>
              <input id="departInput" type="datetime-local">
            </div>
            <div>
              <label>Extra cost (tickets, etc.)</label>
              <div class="cost-row">
                <input id="costMinInput" type="number" min="0" step="1" placeholder="min $">
                <input id="costMaxInput" type="number" min="0" step="1" placeholder="max $">
              </div>
            </div>

            <div>
              <label for="latInput">Latitude (optional)</label>
              <input id="latInput" type="number" step="0.000001" placeholder="36.1295">
            </div>
            <div>
              <label for="lngInput">Longitude (optional)</label>
              <input id="lngInput" type="number" step="0.000001" placeholder="-115.2947">
            </div>

            <div class="form-row-full">
              <label for="summaryNotesInput">Short notes (shown on card)</label>
              <textarea id="summaryNotesInput" placeholder="Aim to arrive 30â€“45 minutes early; park in north lot."></textarea>
            </div>

            <div class="form-row-full form-actions">
              <button type="submit" class="btn" id="saveStopBtn">Add stop</button>
              <button type="button" class="btn btn-ghost" id="newStopBtn">New blank</button>
              <button type="button" class="btn btn-ghost" id="resetFormBtn">Reset fields</button>
              <span class="small">Data is saved automatically in this browser (localStorage).</span>
            </div>
          </div>
        </form>

        <hr class="divider">

        <div class="panel-title panel-title-small">
          <span>Your stops</span>
          <span class="small" id="stopCountLabel">0 stops</span>
        </div>
        <p class="small">
          Tip: click any card to select it. That will highlight it, update the map on the right,
          and load that stopâ€™s detailed notes.
        </p>
        <div class="stop-list" id="stopList"></div>
      </section>

      <!-- RIGHT: map + notes -->
      <section class="panel">
        <div class="panel-title">
          <span>Map</span>
          <span class="small" id="mapHint">
            If a stop has latitude/longitude or a location, clicking it will load it here.
          </span>
        </div>

        <div class="map-wrapper">
          <!-- No API key, just a simple iframe -->
          <iframe id="mapFrame"
                  src="about:blank"
                  loading="lazy"
                  referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>

        <p class="map-hint">
          Click a stop on the left to center the map on that exact location.
        </p>

        <div class="notes-header">
          <span>Notes for selected stop</span>
          <span class="badge" id="notesStopLabel">No stop selected</span>
        </div>
        <textarea id="detailNotesInput"
                  placeholder="Detailed notes for this stop (feelings, experiences, packing reminders, etc.)."
                  disabled></textarea>

        <p class="sleep-tip">
          Sleep reminder: use your arrival &amp; depart times plus drive time to make sure you still get
          at least 5 hours of actual sleep before each early temple morning.
        </p>
      </section>
    </section>
  </main>
</main>

<script>
  // Pull a pending stop (if any) from pass-by-state.html
  document.addEventListener("DOMContentLoaded", () => {
    try {
      const raw = localStorage.getItem("pendingTempleStop");
      if (!raw) return;

      const pending = JSON.parse(raw);

      const nameInput = document.getElementById("nameInput");
      const typeInput = document.getElementById("typeInput");
      const locationInput = document.getElementById("locationInput");
      const latInput = document.getElementById("latInput");
      const lngInput = document.getElementById("lngInput");
      const summaryNotesInput = document.getElementById("summaryNotesInput");
      const saveStopBtn = document.getElementById("saveStopBtn");

      if (nameInput && pending.name) nameInput.value = pending.name;

      if (typeInput) {
        // Use the type from pending if it exists in the dropdown, otherwise default to "nps"
        const values = Array.from(typeInput.options).map(o => o.value);
        if (pending.type && values.includes(pending.type)) {
          typeInput.value = pending.type;
        } else if (values.includes("nps")) {
          typeInput.value = "nps";
        }
      }

      if (locationInput && pending.location) locationInput.value = pending.location;
      if (latInput && pending.lat) latInput.value = pending.lat;
      if (lngInput && pending.lng) lngInput.value = pending.lng;

      if (summaryNotesInput && pending.summary) {
        summaryNotesInput.value = pending.summary;
      }

      if (saveStopBtn) {
        saveStopBtn.textContent = "Add stop from pass list";
      }

      // Clear it so it doesn't keep re-filling on every visit
      localStorage.removeItem("pendingTempleStop");
    } catch (e) {
      console.warn("Could not read pendingTempleStop", e);
    }
  });
</script>
</body>
</html>